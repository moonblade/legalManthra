var serverUrl="http://63.141.232.148:3000/",cases="cases/";angular.module("LegalManthra",["ngMaterial","ui.router","googleplus","ngStorage"]).config(function(a,b,c){b.otherwise("/search/"),a.state("search",{url:"/search/:term",templateUrl:"modules/search/search.html",controller:"SearchController"}).state("detail",{url:"/detail/:id",templateUrl:"modules/detail/detail.html",controller:"detailController"}).state("input",{url:"/input",templateUrl:"modules/input/input.html",controller:"inputController"}),c.init({clientId:"704894076751-sogp2ijut7r533b9igomll4rgs44sori.apps.googleusercontent.com",apiKey:"AIzaSyAn10rsKeY1EOv4MK_3XBL7edv9hLAaVkE"})}),angular.module("LegalManthra").factory("mainFactory",["$http","$localStorage",function(a,b){var c=serverUrl+cases,d={},e=function(a){a.user=b.user};return d.login=function(b){return a.post(serverUrl+"login/",b)},d.logout=function(b){return a.post(serverUrl+"logout/")},d.getSuggestions=function(b){return console.log(c+"getsuggestions/"+b),a.get(c+"getsuggestions/"+b)},d.search=function(b){return a.get(c+b,{withCredentials:!0})},d.getById=function(b){return console.log(c+"display/"+b),a.get(c+"display/"+b,{withCredentials:!0})},d.upload=function(b){return console.log(c),e(b),a({url:c,method:"PUT",data:b})},d}]),angular.module("LegalManthra").filter("titlecase",function(a){return function(a){if(void 0==a)return"";var b=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return a=a.toLowerCase(),a.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(a,c,d){return c>0&&c+a.length!==d.length&&a.search(b)>-1&&":"!==d.charAt(c-2)&&("-"!==d.charAt(c+a.length)||"-"===d.charAt(c-1))&&d.charAt(c-1).search(/[^\s-]/)<0?a.toLowerCase():a.substr(1).search(/[A-Z]|\../)>-1?a:a.charAt(0).toUpperCase()+a.substr(1)})}}).filter("html",function(a){return function(b){return a.trustAsHtml(b)}}),angular.module("LegalManthra").controller("detailController",["$scope","$stateParams","mainFactory",function(a,b,c){var d=b.id;c.getById(d).success(function(b){console.log(b),b.found&&(a.result=b._source)}).error(function(b){console.log("Error : "+b),a.result=[]})}]),angular.module("LegalManthra").controller("inputController",function(a,b,c,d,e){a.inputTypes=["case"],a.selected="case",a.commonField={name:"type"};var f=function(a,b){c.show(c.alert().clickOutsideToClose(!0).title(a).textContent(b).ok("Okay"))};a.submit=function(){var c={type:a.selected,commonField:a.commonField,postData:a.postData};e.user?a.postData?(console.log(c),b.upload(c).success(function(a){console.log(a),f("Success","The data has been uploaded successfully")}).error(function(a){console.log(a),message=a?a.message||a.message:"Unknown Error",f("Failed","There was an error during upload : "+message)})):f("Error","Please enter data to upload"):f("Error","Please login for upload")},a.loginAction=e.user?"Logout":"Login",a.login=function(){e.user?(e.user=null,a.loginAction="Login",d.logout()):d.login().then(function(c){d.getUser().then(function(c){b.login({user:c}).success(function(b){a.loginAction="Logout",e.user=c}).error(function(a){console.log(a),f("Failed","There was an error during login : "+(a?a:"Unknown Error"))})})},function(a){console.log(a)})}}),angular.module("LegalManthra").controller("SearchController",function(a,b,c,d){var e="No results Found";a.height=100,a.search=function(a){""!=a&&c.go("search",{term:a})},d.term&&b.search(d.term).success(function(b){console.log(b),b.timed_out||(hits=b.hits,hits.total>0?(a.height=20,a.results=hits.hits):a.results=[{_source:{title:e}}])}).error(function(b){a.results=[{_source:{title:e}}]}),a.searchTextChange=function(a){},a.querySearch=function(a){return[]},a.showDetails=function(a){if(console.log(a),a._source.title!=e)var b=a._source.id;c.go("detail",{id:b})}});